<!DOCTYPE html>
<html lang="en">
    {% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        {% block head_title %}
        {% endblock head_title %}
    </title>
    {% block extra_head %}
    {% endblock extra_head %}

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" defer/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" defer/>
    <link rel="stylesheet" href="{% static 'css/main.css' %}" defer>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.3/themes/base/jquery-ui.min.css" integrity="sha512-8PjjnSP8Bw/WNPxF6wkklW6qlQJdWJc/3w/ZQPvZ/1bjVDkrrSqLe9mfPYrMxtnzsXFPc434+u4FHLnLjXTSsg==" crossorigin="anonymous" referrerpolicy="no-referrer" defer />
    <script src="{% static 'js/jquery-3.6.0.min.js' %}" type="text/javascript" ></script>
    <!-- Favicon-->
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicon/android-chrome-192x192.png' %}">

</head>
<body>
    {% block BG %}{% endblock BG %}
    </div>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom border-1 border-secondary">
        <div class="container-fluid">
            {% if user.is_authenticated %}
            <a class="navbar-brand" href="{% url 'dashboard' %}">
                <i class="fa-solid fa-network-wired me-2"></i>EthioTalentX
            </a>
            {% else %}
            <a class="navbar-brand" href="/">
                <i class="fa-solid fa-network-wired me-2"></i>EthioTalentX
            </a>
            {% endif %}
            <button class="navbar-toggler" style="border-style: none; position: absolute; top: 10px; right: 10px;" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse px-4 justify-content-end position-absolute" style="width: auto; right: 0;" id="navbarSupportedContent">

                <ul class="navbar-nav ms-auto mb-lg-0">
                    <li class="nav-item"></li>
                    <form method="POST" action="{% url 'donate' %}">
                        {% csrf_token %}
                        <input type="hidden" name="price_id" value="price_1PEEkEDnw0ite3t6mb2I1ZtA">
                        <button type="submit" id="donate-button" style="border-radius: 5px; margin-right: 50px; transition: all; padding: 4px; background-color: rgb(99, 98, 98); border: none;">Donate<i class="fas fa-heart mx-2" style="color: red; "></i></button>
                    </form>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'profiles' %}"><i class="fa-solid fa-users me-2" style="color: skyblue;"></i>Talent Hub</a>
                    </li>
                    {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link me-2" href="{% url 'account_logout' %}"><i class="fa-solid fa-right-from-bracket me-3" style="color: rgb(247, 178, 178);"></i>Logout</a>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'account_signup' %}">Register</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'account_login' %}">Login</a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

{% if user.is_authenticated %}
<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <ul class="sidebar-nav">
        <li class="nav-item mt-2">
            <a class="nav-link" href="{% url 'dashboard' %}">
                <i class="fas fa-home me-2"></i><span class="sidebar-text">Dashboard</span>
            </a>
        </li>
        <li class="nav-item mt-2">
            <a class="nav-link" href="{% url 'profile' %}">
                <i class="fas fa-user me-2"></i><span class="sidebar-text">Profile</span>
            </a>
        </li>
        <li class="nav-item mt-2">
            <a class="nav-link" href="{% url 'add_education' %}">
                <i class="fas fa-graduation-cap me-2"></i><span class="sidebar-text">Add Education</span>
            </a>
        </li>
        <li class="nav-item mt-2">
            <a class="nav-link" href="{% url 'add_experience' %}">
                <i class="fas fa-briefcase me-2"></i><span class="sidebar-text">Add Experiance</span>
            </a>
        </li>

    </ul>
</div>
    {% endif %}
    {% block content %}
    {% endblock content %}
    {% include 'chat/chatPage.html' %}

</body>

<script src="{% static 'js/bootstrap.bundle.min.js' %}" type="text/javascript" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/js/bootstrap-datepicker.min.js" integrity="sha512-LsnSViqQyaXpD4mBBdRYeP6sRwJiJveh2ZIbW41EBrNmKxgr/LFZIiWT6yr+nycvhvauz8c2nYMhrP80YhG7Cw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="{% static 'js/jquery.min.js' %}" type="text/javascript" ></script>

<script defer>
    document.addEventListener("DOMContentLoaded", function() {
        const navbarToggler = document.querySelector(".navbar-toggler");
        const navbarCollapse = document.querySelector(".navbar-collapse");

        navbarToggler.addEventListener("click", function() {
        navbarCollapse.classList.toggle("expanded");
        });

        // Detect window resize and remove 'expanded' class from navbar collapse
        window.addEventListener("resize", function() {
        if (window.innerWidth >= 992) {
            navbarCollapse.classList.remove("expanded");
        }
        });
    });

    // drop down nav for mobile
    const navbarToggler = document.querySelector('.navbar-toggler');
    const navbarCollapse = document.getElementById('navbarSupportedContent');
    const documentBody = document.body; // Reference the entire document body

    navbarToggler.addEventListener('click', () => {
    navbarCollapse.classList.toggle('show'); // Toggle 'show' class for collapse behavior
    });

    // Close the dropdown on document click (excluding the navbar itself)
    documentBody.addEventListener('click', (event) => {
    if (navbarCollapse.classList.contains('show') && // Ensure dropdown is open
        !navbarCollapse.contains(event.target)) { // Check click outside navbar
        navbarCollapse.classList.remove('show'); // Close dropdown
    }
    });

    // animation for the donate button
    const donateButton = document.getElementById('donate-button');

    let isMovingRight = true; // Flag to track wiggle direction
    let wiggleAmount = 2; // Define wiggle distance in pixels

    const wiggleButton = () => {
    const basePosition = parseFloat(donateButton.style.left || 0); // Get current left position (or 0)

    if (isMovingRight) {
        donateButton.style.transition = 'transform 1s ease-in-out';
        donateButton.style.transform = `translateX(${basePosition + wiggleAmount}px)`;
    } else {
        donateButton.style.transition = 'transform 1s ease-in-out';
        donateButton.style.transform = `translateX(${basePosition - wiggleAmount}px)`;
    }

    isMovingRight = !isMovingRight;
    setTimeout(wiggleButton, 500); // Animate again after 0.5 seconds
    };

    // Ensure button exists before starting animation (optional)
    if (donateButton) {
    wiggleButton();
    }

    document.addEventListener('DOMContentLoaded', function () {
        // Open the chat modal when the chat icon is clicked
        document.getElementById('openChatModal').addEventListener('click', function () {
            document.getElementById('chatModal').style.display = 'block';
        });

        // Close the chat modal when the close button is clicked
        document.querySelector(".close").onclick = function () {
            document.getElementById('chatModal').style.display = 'none';
        };
    });

    </script>

    {% block extrascripts %}
    {% endblock extrascripts %}

<footer class="footer justify-content-end">
      <span class="text-muted">&copy; Copyright 2024 Created by Ab3nXY</span>
</footer>

</html>
